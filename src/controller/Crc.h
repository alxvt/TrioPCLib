/* ***********************************************************************
   * Project: Controller DLL
   * Author: smartin
   ***********************************************************************
*/

/*---------------------------------------------------------------------
  -- macros
  ---------------------------------------------------------------------*/
#ifndef __CRC_H__
#define __CRC_H__

/*---------------------------------------------------------------------
  -- standard includes
  ---------------------------------------------------------------------*/

/*---------------------------------------------------------------------
  -- project includes
  ---------------------------------------------------------------------*/

/*---------------------------------------------------------------------
  -- data types
  ---------------------------------------------------------------------*/
struct CRCLibraryType {
	char	szName[10];
	int		nWidth;
	long	lPolynomial, lInit;
	BOOL	bReflectInput, bReflectOutput;
};

class CCRC {
protected:
	CRCLibraryType *m_pCRCData;
	
	// lookup table
	long	m_lLookupTable[256];

	// crc calculation
	long	m_lCRC;
	
public:
			CCRC();
	BOOL	SelectCRCType(const char *szName);
	void	InitCRC();
	void	CRCString(const char *szString);
	void	CRCBuffer(const char *szBuffer, int nLength);
	long	GetCRC();
	
protected:
	long	Reflect(long lNumber, int nWidth);
	void	GenerateLookupTable();
};

/*---------------------------------------------------------------------
  -- function prototypes
  ---------------------------------------------------------------------*/

/*---------------------------------------------------------------------
  -- global variables
  ---------------------------------------------------------------------*/

/*---------------------------------------------------------------------
  -- implementation
  ---------------------------------------------------------------------*/
#endif
